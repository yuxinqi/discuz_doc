<html><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="zh-cn" dir="ltr">
<head>
<title>åŸºäºDiscuz!Xçš„å¿ƒæƒ…å¢™ - Discuz! æŠ€æœ¯æ–‡åº“</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="MediaWiki 1.16.2" />
<link rel="shortcut icon" href="../favicon.ico" tppabs="http://dev.discuz.org/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" tppabs="http://dev.discuz.org/wiki/opensearch_desc.php" title="Discuz! æŠ€æœ¯æ–‡åº“ (zh-cn)" />
<link rel="alternate" type="application/atom+xml" title="Discuz! æŠ€æœ¯æ–‡åº“çš„Atomè®¢é˜…" href="index.php-title=ç‰¹æ®Š-æœ€è¿‘æ›´æ”¹&feed=atom" tppabs="http://dev.discuz.org/wiki/index.php?title=%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9&feed=atom" />
<link rel="stylesheet" href="skins/common/shared.css-270" tppabs="http://dev.discuz.org/wiki/skins/common/shared.css?270" media="screen" />
<link rel="stylesheet" href="skins/common/commonPrint.css-270" tppabs="http://dev.discuz.org/wiki/skins/common/commonPrint.css?270" media="print" />
<link rel="stylesheet" href="skins/monobook/main.css-270" tppabs="http://dev.discuz.org/wiki/skins/monobook/main.css?270" media="screen" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/wiki/skins/monobook/IE50Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/wiki/skins/monobook/IE55Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/wiki/skins/monobook/IE60Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/wiki/skins/monobook/IE70Fixes.css?270" media="screen" /><![endif]-->
<link rel="stylesheet" href="index.php-title=MediaWiki-Common.css&usemsgcache=yes&ctype=text-css&smaxage=18000&action=raw&maxage=18000" tppabs="http://dev.discuz.org/wiki/index.php?title=MediaWiki:Common.css&usemsgcache=yes&ctype=text%2Fcss&smaxage=18000&action=raw&maxage=18000" />
<link rel="stylesheet" href="index.php-title=MediaWiki-Print.css&usemsgcache=yes&ctype=text-css&smaxage=18000&action=raw&maxage=18000" tppabs="http://dev.discuz.org/wiki/index.php?title=MediaWiki:Print.css&usemsgcache=yes&ctype=text%2Fcss&smaxage=18000&action=raw&maxage=18000" media="print" />
<link rel="stylesheet" href="index.php-title=MediaWiki-Monobook.css&usemsgcache=yes&ctype=text-css&smaxage=18000&action=raw&maxage=18000" tppabs="http://dev.discuz.org/wiki/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&ctype=text%2Fcss&smaxage=18000&action=raw&maxage=18000" />
<link rel="stylesheet" href="index.php-title=-&action=raw&maxage=18000&gen=css" tppabs="http://dev.discuz.org/wiki/index.php?title=-&action=raw&maxage=18000&gen=css" />
<script>
var skin="monobook",
stylepath="/wiki/skins",
wgUrlProtocols="http\\:\\/\\/|https\\:\\/\\/|ftp\\:\\/\\/|irc\\:\\/\\/|gopher\\:\\/\\/|telnet\\:\\/\\/|nntp\\:\\/\\/|worldwind\\:\\/\\/|mailto\\:|news\\:|svn\\:\\/\\/",
wgArticlePath="/wiki/index.php?title=$1",
wgScriptPath="/wiki",
wgScriptExtension=".php",
wgScript="/wiki/index.php",
wgVariantArticlePath=false,
wgActionPaths={},
wgServer="http://dev.discuz.org/",
wgCanonicalNamespace="",
wgCanonicalSpecialPageName=false,
wgNamespaceNumber=0,
wgPageName="åŸºäºDiscuz!Xçš„å¿ƒæƒ…å¢™",
wgTitle="åŸºäºDiscuz!Xçš„å¿ƒæƒ…å¢™",
wgAction="view",
wgArticleId=93,
wgIsArticle=true,
wgUserName=null,
wgUserGroups=null,
wgUserLanguage="zh-cn",
wgContentLanguage="zh-cn",
wgBreakFrames=false,
wgCurRevisionId=224,
wgVersion="1.16.2",
wgEnableAPI=true,
wgEnableWriteAPI=true,
wgSeparatorTransformTable=["", ""],
wgDigitTransformTable=["", ""],
wgMainPageTitle="é¦–é¡µ",
wgFormattedNamespaces={"-2": "åª’ä½“", "-1": "ç‰¹æ®Š", "0": "", "1": "è®¨è®º", "2": "ç”¨æˆ·", "3": "ç”¨æˆ·è®¨è®º", "4": "Discuz! æŠ€æœ¯æ–‡åº“", "5": "Discuz! æŠ€æœ¯æ–‡åº“è®¨è®º", "6": "æ–‡ä»¶", "7": "æ–‡ä»¶è®¨è®º", "8": "MediaWiki", "9": "MediaWikiè®¨è®º", "10": "æ¨¡æ¿", "11": "æ¨¡æ¿è®¨è®º", "12": "å¸®åŠ©", "13": "å¸®åŠ©è®¨è®º", "14": "åˆ†ç±»", "15": "åˆ†ç±»è®¨è®º"},
wgNamespaceIds={"åª’ä½“": -2, "ç‰¹æ®Š": -1, "": 0, "è®¨è®º": 1, "ç”¨æˆ·": 2, "ç”¨æˆ·è®¨è®º": 3, "discuz!_æŠ€æœ¯æ–‡åº“": 4, "discuz!_æŠ€æœ¯æ–‡åº“è®¨è®º": 5, "æ–‡ä»¶": 6, "æ–‡ä»¶è®¨è®º": 7, "mediawiki": 8, "mediawikiè®¨è®º": 9, "æ¨¡æ¿": 10, "æ¨¡æ¿è®¨è®º": 11, "å¸®åŠ©": 12, "å¸®åŠ©è®¨è®º": 13, "åˆ†ç±»": 14, "åˆ†ç±»è®¨è®º": 15, "å¯¹è¯": 1, "ç”¨æˆ·å¯¹è¯": 3, "å›¾åƒ": 6, "æ¡£æ¡ˆ": 6, "image": 6, "image_talk": 7, "å›¾åƒå¯¹è¯": 7, "å›¾åƒè®¨è®º": 7, "æ¡£æ¡ˆå¯¹è¯": 7, "æ¡£æ¡ˆè®¨è®º": 7, "æ–‡ä»¶å¯¹è¯": 7, "æ¨¡æ¿å¯¹è¯": 11, "å¸®åŠ©å¯¹è¯": 13, "åˆ†ç±»å¯¹è¯": 15},
wgSiteName="Discuz! æŠ€æœ¯æ–‡åº“",
wgCategories=[],
wgRestrictionEdit=[],
wgRestrictionMove=[];
</script><script src="skins/common/wikibits.js-270" tppabs="http://dev.discuz.org/wiki/skins/common/wikibits.js?270"></script>
<script src="skins/common/ajax.js-270" tppabs="http://dev.discuz.org/wiki/skins/common/ajax.js?270"></script>
<script src="index.php-title=-&action=raw&gen=js&useskin=monobook&270" tppabs="http://dev.discuz.org/wiki/index.php?title=-&action=raw&gen=js&useskin=monobook&270"></script>

</head>
<body class="mediawiki ltr ns-0 ns-subject page-åŸºäºDiscuz_Xçš„å¿ƒæƒ…å¢™ skin-monobook">
<div id="globalWrapper">
<div id="column-content"><div id="content" >
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading">åŸºäºDiscuz!Xçš„å¿ƒæƒ…å¢™</h1>
	<div id="bodyContent">
		<h3 id="siteSub">å‡ºè‡ªDiscuz! æŠ€æœ¯æ–‡åº“</h3>
		<div id="contentSub"></div>
		<div id="jump-to-nav">è·³è½¬åˆ°ï¼š <a href="#column-one">å¯¼èˆª</a>, <a href="#searchInput">æœç´¢</a></div>
		<!-- start content -->
<dl><dt>åŠŸèƒ½æè¿°ï¼šæ¯ä¸ªä¼šå‘˜éƒ½å¯ä»¥å†™ä¸‹è‡ªå·±çš„å¿ƒæƒ…ï¼Œæ¸¸å®¢ä¸å¯ä»¥ç•™è¨€ã€‚æŒ‰æ—¶é—´å€’åºæ˜¾ç¤ºæœ€æ–°çš„ç•™è¨€ã€‚
</dt></dl>
<dl><dt>æˆ‘ä»¬çš„å®—æ—¨æ˜¯</dt><dd>å°½é‡ä¸è¦å»ä¿®æ”¹æˆ–è¿‡å¤šä¾æ‡’é»˜è®¤æ¨¡æ¿æˆ–ç¨‹åºï¼Œå¦åˆ™ï¼ŒDiscuz!å‡çº§æ—¶ä¼šç»™ä½ å¸¦æ¥æ— å°½çš„ç—›è‹¦...
</dd></dl>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>ç›®å½•</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.E8.AE.BE.E8.AE.A1.E8.A1.A8.E7.BB.93.E6.9E.84.EF.BC.9A"><span class="tocnumber">1</span> <span class="toctext">è®¾è®¡è¡¨ç»“æ„ï¼š</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.E5.88.9B.E5.BB.BA.E7.9A.84.E6.96.87.E4.BB.B6.EF.BC.9A.28..2F.E8.A1.A8.E7.A4.BA.E7.AB.99.E7.82.B9.E6.A0.B9.E7.9B.AE.E5.BD.95.29"><span class="tocnumber">2</span> <span class="toctext">åˆ›å»ºçš„æ–‡ä»¶ï¼š(./è¡¨ç¤ºç«™ç‚¹æ ¹ç›®å½•)</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#moop.php"><span class="tocnumber">3</span> <span class="toctext">moop.php</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#list.php"><span class="tocnumber">4</span> <span class="toctext">list.php</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#list.htm"><span class="tocnumber">5</span> <span class="toctext">list.htm</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#publish.php"><span class="tocnumber">6</span> <span class="toctext">publish.php</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#publish.htm"><span class="tocnumber">7</span> <span class="toctext">publish.htm</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#.E5.85.B3.E4.BA.8E.E8.AF.AD.E8.A8.80.E5.8C.85.E7.9A.84.E6.8F.90.E5.8F.96"><span class="tocnumber">8</span> <span class="toctext">å…³äºè¯­è¨€åŒ…çš„æå–</span></a></li>
</ul>
</td></tr></table><script>if (window.showTocToggle) { var tocShowText = "æ˜¾ç¤º"; var tocHideText = "éšè—"; showTocToggle(); } </script>
<h3> <span class="mw-headline" id=".E8.AE.BE.E8.AE.A1.E8.A1.A8.E7.BB.93.E6.9E.84.EF.BC.9A">è®¾è®¡è¡¨ç»“æ„ï¼š</span></h3>
<pre>
CREATE TABLE pre_mood_wall (
  mid mediumint(8) unsigned NOT NULL auto_increment COMMENT 'å¿ƒæƒ…id',
  uid mediumint(8) unsigned NOT NULL default '0' COMMENT 'ç”¨æˆ·id',
  username varchar(15) NOT NULL default '' COMMENT 'ç”¨æˆ·åç§°',
  dateline int(10) unsigned NOT NULL default '0' COMMENT 'å‘å¸ƒæ—¶é—´',
  message text NOT NULL COMMENT 'å†…å®¹',
  PRIMARY KEY  (mid),
  KEY dateline (dateline)
) ENGINE=MyISAM COMMENT='å¿ƒæƒ…å¢™';

</pre>
<h3> <span class="mw-headline" id=".E5.88.9B.E5.BB.BA.E7.9A.84.E6.96.87.E4.BB.B6.EF.BC.9A.28..2F.E8.A1.A8.E7.A4.BA.E7.AB.99.E7.82.B9.E6.A0.B9.E7.9B.AE.E5.BD.95.29"> åˆ›å»ºçš„æ–‡ä»¶ï¼š(./è¡¨ç¤ºç«™ç‚¹æ ¹ç›®å½•) </span></h3>
<ul><li>./mood.php	//å…¥å£æ–‡ä»¶
</li></ul>
<ul><li>./source/module/mood/list.php //æŸ¥çœ‹å¿ƒæƒ…
</li></ul>
<ul><li>./source/module/mood/publish.php //å‘å¸ƒå¿ƒæƒ…
</li></ul>
<ul><li>./template/default/mood/list.htm //æŸ¥çœ‹å¿ƒæƒ…åˆ—è¡¨æ¨¡æ¿
</li></ul>
<ul><li>./template/default/mood/publish.htm //å‘å¸ƒå¿ƒæƒ…æ¨¡æ¿
</li></ul>
<dl><dt>åŠŸèƒ½ç®€å•ï¼Œæ‰€ä»¥æ²¡æœ‰æ¶‰åŠåˆ°ä¸“ç”¨å‡½æ•°å’Œç±»çš„æ–‡ä»¶ ï¼ˆsource/classç›®å½•å’Œsource/functionç›®å½•ï¼‰
</dt></dl>
<p><br />
</p>
<h3> <span class="mw-headline" id="moop.php"> moop.php </span></h3>
<pre>
&lt;?php
// å®šä¹‰åº”ç”¨ ID å…¨å±€è®°å½•å½“å‰ç”¨æˆ·æ‰€åœ¨ä½ç½®ï¼Œä¸éœ€è¦å¯å®šä¹‰ä¸º0 ä¸è¦çœç•¥
define('APPTYPEID', 0);
define('CURSCRIPT', 'mood');

//====================================
// åŸºç¡€æ–‡ä»¶å¼•å…¥
//====================================
require './source/class/class_core.php';

$discuz = &amp; discuz_core::instance();

//====================================
//æ¨¡å—å®šä¹‰ä»¥åŠæ¨¡å—ç¼“å­˜å®šä¹‰
//====================================
$modarray = array('list', 'publish');

// åˆ¤æ–­ $mod çš„åˆæ³•æ€§

$mod =&nbsp;!in_array($discuz-&gt;var['mod'], $modarray)&nbsp;? 'list'&nbsp;: $discuz-&gt;var['mod'];

//å®šä¹‰å½“å‰æ¨¡å—å¸¸é‡
define('CURMODULE', $mod);

//====================================
// åŠ è½½æ ¸å¿ƒå¤„ç†,å„ç¨‹åºå…¥å£æ–‡ä»¶ä»£ç ç›¸åŒ
//====================================
$discuz-&gt;init();

//====================================
// ä»¥ä¸‹å†…å®¹ç”±å„ä¸ªæ¨¡å—æ ¹æ®éœ€è¦è‡ªè¡Œæ’°å†™ç¨‹åºè¿è¡Œç¯å¢ƒ
// ä½äºæ ¸å¿ƒå¤„ç†ä¸modåŠ è½½ä¹‹å‰ï¼Œå¯ä»¥å¤„ç†ä¸€äº›å„modå…±ç”¨çš„ä¸€äº›æ•°æ®ï¼Œæˆ–å…¥å£æƒé™åˆ¤æ–­ç­‰...
// ç”±äºæœ¬åŠŸèƒ½åªéœ€è¦æ¸¸å®¢åšå‘å¸ƒçš„é™åˆ¶ï¼Œæ‰€ä»¥åˆ¤æ–­å°±è¦æ”¾åˆ°module/mood/publish.phpä¸­å»äº†ã€‚
//====================================


//===================================
//åŠ è½½ mod
//===================================

require DISCUZ_ROOT.'./source/module/mood/'.$mod.'.php';

?&gt;
</pre>
<h3> <span class="mw-headline" id="list.php"> list.php </span></h3>
<pre>
&lt;?php
// modæ–‡ä»¶åªèƒ½è¢«å…¥å£æ–‡ä»¶å¼•ç”¨ï¼Œä¸èƒ½ç›´æ¥è®¿é—®
if(!defined('IN_DISCUZ')) {
	exit('Access Denied');
}

//åˆå§‹åŒ–å½“å‰é¡µç 
$page = empty($_GET['page'])?1:intval($_GET['page']);
if($page&lt;1) $page=1;

//åˆ†é¡µ
$perpage = 20;
$start = ($page-1)*$perpage;

//è·å–å½“å‰é¡µçš„ç•™è¨€æ•°æ®
$list = array();
$query = DB::query(&quot;SELECT * FROM &quot;.DB::table('mood_wall').&quot; WHERE 1 ORDER BY dateline DESC LIMIT $start, $perpage&quot;);
while($mood = DB::fetch($query)) {
	$mood['dateline'] = dgmdate($mood['dateline'], 'u');
	$list[] = $mood;
}

//è·å¾—ä¸€ä¸ªç®€å•çš„åˆ†é¡µï¼Œåªæœ‰ä¸Šä¸€é¡µå’Œä¸‹ä¸€é¡µï¼Œè¿™ä¸ªä¸éœ€è¦count()æ•°æ®è¡¨ä¸­çš„æ‰€æœ‰è®°å½•
$multi = simplepage(count($list), $perpage, $page, 'mood.php?mod=list');

//æ•°æ®å‡†å¤‡å®Œæ¯•ï¼Œå¼•å…¥ç›¸åº”çš„æ¨¡æ¿ï¼Œå‡†å¤‡è¾“å‡º
include_once template(&quot;mood/list&quot;);

?&gt;
</pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="list.htm"> list.htm </span></h3>
<pre>
&lt;!--//è¯´æ˜: æ˜¾ç¤ºå…¬å…±å¤´éƒ¨æ¨¡æ¿--&gt;
&lt;!--{template common/header}--&gt;

&lt;!--//è¯´æ˜: å¼€å§‹æ˜¾ç¤ºç•™è¨€--&gt;
&lt;div id=&quot;ct&quot; class=&quot;wp cl&quot;&gt;
	&lt;h1 class=&quot;mt&quot;&gt;å¿ƒæƒ…å¢™ - &lt;!--{if $_G[uid]}--&gt;&lt;a href=&quot;mood.php?mod=publish&quot;&gt;å‘è¡¨å¿ƒæƒ…&lt;/a&gt;&lt;!--{/if}--&gt;&lt;/h1&gt; 
	&lt;div class=&quot;bm&quot;&gt;
		&lt;!--{if $list}--&gt;
			&lt;!--//è¯´æ˜: loop å¾ªç¯ä¸€ä¸ªæ•°ç»„ ç›¸å½“äºforeach(){}--&gt;
			&lt;!--{loop $list $mood}--&gt;
				&lt;a href=&quot;home.php?mod=space&amp;uid=$mood[uid]&quot; target=&quot;_blank&quot;&gt;&lt;!--{avatar($value[authorid],small)}--&gt;&lt;/a&gt;&lt;br&gt;
				&lt;a href=&quot;home.php?mod=space&amp;uid=$mood[uid]&quot; title=&quot;$mood[username]&quot; target=&quot;_blank&quot; class=&quot;xi2&quot;&gt;$mood[username]&lt;/a&gt; å‘è¡¨äº: $mood[dateline]
				&lt;br&gt;
				å¿ƒæƒ…: $mood[message]
				&lt;hr&gt;
			&lt;!--{/loop}--&gt;
			&lt;!--//è¯´æ˜: æ˜¾ç¤ºå‡†å¤‡å¥½çš„åˆ†é¡µé“¾æ¥--&gt;
			$multi
		&lt;!--{else}--&gt;
			&lt;p class=&quot;emp&quot;&gt;æš‚æ—¶æ²¡æœ‰è®°å½•...&lt;/p&gt;
		&lt;!--{/if}--&gt;
	&lt;/div&gt;
&lt;/div&gt;

&lt;!--//è¯´æ˜: æ˜¾ç¤ºå…¬å…±å°¾éƒ¨æ¨¡æ¿--&gt;
&lt;!--{template common/footer}--&gt;
</pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="publish.php"> publish.php </span></h3>
<pre>
&lt;?php
// modæ–‡ä»¶åªèƒ½è¢«å…¥å£æ–‡ä»¶å¼•ç”¨ï¼Œä¸èƒ½ç›´æ¥è®¿é—®
if(!defined('IN_DISCUZ')) {
	exit('Access Denied');
}

// æ¸¸å®¢ä¸èƒ½å‘è¡¨å¿ƒæƒ…çš„åˆ¤æ–­
if(!$_G['uid']) {
	showmessage('æŠ±æ­‰ï¼Œæ‚¨å°šæœªç™»å½•ï¼Œæ— æ³•è¿›è¡Œæ­¤æ“ä½œ', '', array(), array('login' =&gt; 1));
}

if(submitcheck('submit')) {
	$message = cutstr(dhtmlspecialchars(stripslashes($_POST['message'])), 150, ''); //æˆªå–150ä¸ªå­—èŠ‚çš„å†…å®¹
	DB::query(&quot;INSERT INTO &quot;.DB::table('mood_wall').&quot; (uid, username, dateline, message) VALUES ('$_G[uid]', '$_G[username]', '&quot;.TIMESTAMP.&quot;', '&quot;.daddslashes($message).&quot;')&quot;);
	showmessage('å‘è¡¨æˆåŠŸã€‚', 'mood.php?mod=list');
}

//æ˜¾ç¤ºå‘å¸ƒè¡¨å•
include_once template(&quot;mood/publish&quot;);
?&gt;
</pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="publish.htm"> publish.htm </span></h3>
<pre>
&lt;!--//è¯´æ˜: æ˜¾ç¤ºå…¬å…±å¤´éƒ¨æ¨¡æ¿--&gt;
&lt;!--{template common/header}--&gt;

&lt;!--//è¯´æ˜: å¼€å§‹æ˜¾ç¤ºè¡¨å•--&gt;
&lt;div id=&quot;ct&quot; class=&quot;wp cl&quot;&gt;
	&lt;h1 class=&quot;mt&quot;&gt;&lt;a href=&quot;mood.php?mod=list&quot;&gt;å¿ƒæƒ…å¢™&lt;/a&gt; - å‘è¡¨å¿ƒæƒ…&lt;/h1&gt;
	&lt;div class=&quot;bm&quot;&gt;
		&lt;form method=&quot;post&quot; action=&quot;mood.php?mod=publish&quot; class=&quot;pns&quot;&gt;
			&lt;input type=&quot;hidden&quot; name=&quot;formhash&quot; id=&quot;formhash&quot; value=&quot;{FORMHASH}&quot; /&gt;
			&lt;!--FORMHASH è‡ªåŠ¨äº§ç”Ÿï¼Œsubmitcheck()å‡½æ•°è¦åˆ¤æ–­è¿™ä¸ªå€¼--&gt;
			&lt;textarea name=&quot;message&quot;&gt;&lt;/textarea&gt;&lt;br&gt;&lt;br&gt;
			&lt;input type=&quot;submit&quot; class=&quot;pn vm&quot; name=&quot;submit&quot; value=&quot;å‘è¡¨&quot; /&gt;
		&lt;/form&gt;
	&lt;/div&gt;
&lt;/div&gt;

&lt;!--//è¯´æ˜: æ˜¾ç¤ºå…¬å…±å°¾éƒ¨æ¨¡æ¿--&gt;
&lt;!--{template common/footer}--&gt;

</pre>
<h3> <span class="mw-headline" id=".E5.85.B3.E4.BA.8E.E8.AF.AD.E8.A8.80.E5.8C.85.E7.9A.84.E6.8F.90.E5.8F.96"> å…³äºè¯­è¨€åŒ…çš„æå– </span></h3>
<p>ä»¥ä¸Šç¤ºä¾‹ä¸­çš„æ±‰å­—éƒ½æ˜¯å†™åˆ°æ¨¡æ¿å’Œç¨‹åºä»£ç é‡Œçš„ã€‚å¦‚æœä½ æƒ³æ”¯æŒå¤šç§æ±‰å­—ç¼–ç ï¼Œé‚£ä¹ˆæå–åˆ°ç»Ÿä¸€çš„è¯­è¨€åŒ…ä¸­ï¼Œä¸ä»£ç åˆ†ç¦»ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚
</p>
<ul><li>è¯­è¨€åŒ…ç›®å½•ï¼š./source/language
</li></ul>
<ul><li>é¦–å…ˆç»™æˆ‘ä»¬çš„åŠŸèƒ½å»ºä¸€ä¸ªä¸“ç”¨ç›®å½•ï¼š./source/language/mood
</li></ul>
<ul><li>åœ¨ä¸“ç”¨ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ï¼š
</li></ul>
<dl><dd>lang_template.php åç§°æ˜¯å›ºå®šçš„ lang()å‡½æ•°ä¼šè‡ªåŠ¨åŠ è½½è¿™ä¸ªæ–‡ä»¶
</dd></dl>
	<pre>
	&lt;?php
		$lang = array (
			'mood_name' =&gt; 'å¿ƒæƒ…å¢™',
			'mood_publish' =&gt; 'å‘è¡¨å¿ƒæƒ…',
			'mood_publish_succeed' =&gt; 'å‘è¡¨æˆåŠŸã€‚',
			'not_loggedin' =&gt; 'æŠ±æ­‰ï¼Œæ‚¨å°šæœªç™»å½•ï¼Œæ— æ³•è¿›è¡Œæ­¤æ“ä½œ',
		  );
	?&gt;
	//æ³¨ï¼š'not_loggedin' è¿™ä¸ªåœ¨å…¬å…±çš„lang_message.phpé‡Œå·²ç»å­˜é¢
	//ç†è®ºä¸Šæ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨showmessage('not_loggedin'...)ï¼Œä½†è¿˜æ˜¯ç”¨è‡ªå·±çš„è¸å®ã€‚showmessage(lang('mood/template', 'not_loggedin')...)
	//æ¨¡æ¿ä¸­çš„æ±‰å­—æ›¿æ¢æˆè¯­è¨€åŒ…


	&lt;h1 class=&quot;mt&quot;&gt;&lt;a href=&quot;mood.php?mod=list&quot;&gt;å¿ƒæƒ…å¢™&lt;/a&gt; - å‘è¡¨å¿ƒæƒ…&lt;/h1&gt;

	å˜æˆ

	&lt;h1 class=&quot;mt&quot;&gt;&lt;a href=&quot;mood.php?mod=list&quot;&gt;{lang mood_name}&lt;/a&gt; - {lang mood_publish}&lt;/h1&gt;
	

	
	//ç¨‹åºä¸­ä½¿ç”¨è¯­è¨€åŒ…
	
	showmessage('æŠ±æ­‰ï¼Œæ‚¨å°šæœªç™»å½•ï¼Œæ— æ³•è¿›è¡Œæ­¤æ“ä½œ', '', array(), array('login' =&gt; 1));
	
	å˜æˆ
	
	showmessage(lang('mood/template', 'not_loggedin'), '', array(), array('login' =&gt; 1));

	</pre>
<p><br />
</p><p><br />
</p>
<dl><dt>æ³¨ï¼šè¿™é‡Œæ²¡æœ‰å†™åˆ é™¤åŠŸèƒ½ï¼Œæœ‰å…´è¶£çš„è¯è‡ªå·±åŠ ä¸€ä¸ªè¯•è¯•^0^
</dt></dl>
<p><br />
</p><p><font color="red" size="30"><i>ç•Œé¢å¾ˆç»™åŠ›ï¼Œé¢„è§ˆéœ€è°¨æ…... ...</i></font>
</p>
<!-- 
NewPP limit report
Preprocessor node count: 89/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key dev-mw_:pcache:idhash:93-0!1!0!!zh-cn!2!edit=0 and timestamp 20110425114758 -->
<div class="printfooter">
å–è‡ªâ€œ<a href="index.php-title=åŸºäºDiscuz!Xçš„å¿ƒæƒ…å¢™.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E5%9F%BA%E4%BA%8EDiscuz!X%E7%9A%84%E5%BF%83%E6%83%85%E5%A2%99">http://dev.discuz.org/wiki/index.php?title=%E5%9F%BA%E4%BA%8EDiscuz!X%E7%9A%84%E5%BF%83%E6%83%85%E5%A2%99</a>â€</div>
		<div id='catlinks' class='catlinks catlinks-allhidden'></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>æŸ¥çœ‹</h5>
		<div class="pBody">
			<ul>
				 <li id="ca-nstab-main" class="selected"><a href="index.php-title=åŸºäºDiscuz!Xçš„å¿ƒæƒ…å¢™.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E5%9F%BA%E4%BA%8EDiscuz!X%E7%9A%84%E5%BF%83%E6%83%85%E5%A2%99" title="æŸ¥çœ‹é¡µé¢å†…å®¹ [c]" accesskey="c">é¡µé¢</a></li>
				 <li id="ca-talk" class="new"><a href="index.php-title=ç‰¹æ®Š-é“¾å‡ºæ›´æ”¹&limit=100&from=20111128013603&hideliu=1&hidemyself=1&target=æ–‡ä»¶-Introff_1jLOYlJZaqiA.jpg.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E8%AE%A8%E8%AE%BA:%E5%9F%BA%E4%BA%8EDiscuz!X%E7%9A%84%E5%BF%83%E6%83%85%E5%A2%99&action=edit&redlink=1" title="å…³äºé¡µé¢æ­£æ–‡çš„è®¨è®º [t]" accesskey="t">è®¨è®º</a></li>
				 <li id="ca-viewsource"><a href="index.php-title=ç‰¹æ®Š-é“¾å‡ºæ›´æ”¹&limit=250&from=20111128013603&hideliu=1&hidemyself=1&target=æ–‡ä»¶-Introff_1jLOYlJZaqiA.jpg.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E5%9F%BA%E4%BA%8EDiscuz!X%E7%9A%84%E5%BF%83%E6%83%85%E5%A2%99&action=edit" title="æ­¤é¡µé¢å·²è¢«ä¿æŠ¤ï¼Œä½ å¯ä»¥æŸ¥çœ‹å…¶æºä»£ç ã€‚ [e]" accesskey="e">æŸ¥çœ‹æºä»£ç </a></li>
				 <li id="ca-history"><a href="index.php-title=ç‰¹æ®Š-é“¾å‡ºæ›´æ”¹&limit=500&from=20111128013603&hideliu=1&hidemyself=1&target=æ–‡ä»¶-Introff_1jLOYlJZaqiA.jpg.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E5%9F%BA%E4%BA%8EDiscuz!X%E7%9A%84%E5%BF%83%E6%83%85%E5%A2%99&action=history" title="æ­¤é¡µé¢çš„æ—©å‰ä¿®è®¢ç‰ˆæœ¬ [h]" accesskey="h">å†å²</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>ä¸ªäººå·¥å…·</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="index.php-title=ç‰¹æ®Š-é“¾å‡ºæ›´æ”¹&hideminor=1&from=20111128013603&hideliu=1&hidemyself=1&target=æ–‡ä»¶-Introff_1jLOYlJZaqiA.jpg.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E7%89%B9%E6%AE%8A:%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95&returnto=%E5%9F%BA%E4%BA%8EDiscuz!X%E7%9A%84%E5%BF%83%E6%83%85%E5%A2%99" title="æˆ‘ä»¬é¼“åŠ±æ‚¨ç™»å½•ï¼Œä½†è¿™å¹¶ä¸æ˜¯å¿…é¡»çš„ [o]" accesskey="o">ç™»å½•</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(/wiki/images/wiki.gif);" href="index.php-title=é¦–é¡µ.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E9%A6%96%E9%A1%B5" title="è®¿é—®é¦–é¡µ"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>å¯¼èˆª</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="index.php-title=é¦–é¡µ.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E9%A6%96%E9%A1%B5" title="è®¿é—®é¦–é¡µ [z]" accesskey="z">é¦–é¡µ</a></li>
				<li id="n-portal"><a href="index.php-title=Discuz!_æŠ€æœ¯æ–‡åº“-ç¤¾åŒº.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=Discuz!_%E6%8A%80%E6%9C%AF%E6%96%87%E5%BA%93:%E7%A4%BE%E5%8C%BA" title="å…³äºæœ¬è®¡åˆ’ï¼Œæ‚¨å¯ä»¥åšä»€ä¹ˆï¼Œåº”è¯¥å¦‚ä½•åš">ç¤¾åŒºå…¥å£</a></li>
				<li id="n-currentevents"><a href="index.php-title=Discuz!_æŠ€æœ¯æ–‡åº“-å½“å‰äº‹ä»¶.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=Discuz!_%E6%8A%80%E6%9C%AF%E6%96%87%E5%BA%93:%E5%BD%93%E5%89%8D%E4%BA%8B%E4%BB%B6" title="æŸ¥æ‰¾å½“å‰äº‹ä»¶çš„èƒŒæ™¯ä¿¡æ¯">å½“å‰äº‹ä»¶</a></li>
				<li id="n-recentchanges"><a href="index.php-title=ç‰¹æ®Š-æœ€è¿‘æ›´æ”¹.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9" title="åˆ—å‡ºè¯¥ç½‘ç«™çš„æœ€è¿‘ä¿®æ”¹ [r]" accesskey="r">æœ€è¿‘æ›´æ”¹</a></li>
				<li id="n-randompage"><a href="index.php-title=ç‰¹æ®Š-ç”¨æˆ·ç™»å½•&returnto=ç‰¹æ®Š-é“¾å‡ºæ›´æ”¹&returntoquery=hidemyself=1&from=20111128013601&target=æ–‡ä»¶-Introff_1jLOYlJZaqiA.jpg.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E7%89%B9%E6%AE%8A:%E9%9A%8F%E6%9C%BA%E9%A1%B5%E9%9D%A2" title="éšæœºè½½å…¥ä¸€ä¸ªé¡µé¢ [x]" accesskey="x">éšæœºé¡µé¢</a></li>
				<li id="n-help"><a href="index.php-title=å¸®åŠ©-ç›®å½•.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E5%B8%AE%E5%8A%A9:%E7%9B%AE%E5%BD%95" title="å¯»æ±‚å¸®åŠ©">å¸®åŠ©</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">æœç´¢</label></h5>
		<div id="searchBody" class="pBody">
			<form action="http://dev.discuz.org/wiki/index.php" id="searchform">
				<input type='hidden' name="title" value="ç‰¹æ®Š:æœç´¢"/>
				<input id="searchInput" title="æœç´¢è¯¥ç½‘ç«™" accesskey="f" type="search" name="search" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="è¿›å…¥" title="å¦‚æœç›¸åŒçš„æ ‡é¢˜å­˜åœ¨çš„è¯ä¾¿ç›´æ¥å‰å¾€è¯¥é¡µé¢" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="æœç´¢" title="æœç´¢è¯¥æ–‡å­—çš„é¡µé¢" />
			</form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>å·¥å…·ç®±</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="index.php-title=ç‰¹æ®Š-é“¾å‡ºæ›´æ”¹&hidebots=0&from=20111128013603&hideliu=1&hidemyself=1&target=æ–‡ä»¶-Introff_1jLOYlJZaqiA.jpg.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E7%89%B9%E6%AE%8A:%E9%93%BE%E5%85%A5%E9%A1%B5%E9%9D%A2/%E5%9F%BA%E4%BA%8EDiscuz!X%E7%9A%84%E5%BF%83%E6%83%85%E5%A2%99" title="åˆ—å‡ºæ‰€æœ‰ä¸æ­¤é¡µç›¸é“¾çš„é¡µé¢ [j]" accesskey="j">é“¾å…¥é¡µé¢</a></li>
				<li id="t-recentchangeslinked"><a href="index.php-title=ç‰¹æ®Š-é“¾å‡ºæ›´æ”¹&hideanons=1&from=20111128013603&hideliu=1&hidemyself=1&target=æ–‡ä»¶-Introff_1jLOYlJZaqiA.jpg.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E7%89%B9%E6%AE%8A:%E9%93%BE%E5%87%BA%E6%9B%B4%E6%94%B9/%E5%9F%BA%E4%BA%8EDiscuz!X%E7%9A%84%E5%BF%83%E6%83%85%E5%A2%99" title="ä»æ­¤é¡µé“¾å‡ºçš„æ‰€æœ‰é¡µé¢çš„æ›´æ”¹ [k]" accesskey="k">é“¾å‡ºæ›´æ”¹</a></li>
<li id="t-specialpages"><a href="index.php-title=ç‰¹æ®Š-ç‰¹æ®Šé¡µé¢.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E7%89%B9%E6%AE%8A:%E7%89%B9%E6%AE%8A%E9%A1%B5%E9%9D%A2" title="æ‰€æœ‰ç‰¹æ®Šé¡µé¢åˆ—è¡¨ [q]" accesskey="q">ç‰¹æ®Šé¡µé¢</a></li>
				<li id="t-print"><a href="index.php-title=ç‰¹æ®Š-é“¾å‡ºæ›´æ”¹&hideliu=0&from=20111128013603&hidemyself=1&target=æ–‡ä»¶-Introff_1jLOYlJZaqiA.jpg.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E5%9F%BA%E4%BA%8EDiscuz!X%E7%9A%84%E5%BF%83%E6%83%85%E5%A2%99&printable=yes" rel="alternate" title="è¿™ä¸ªé¡µé¢çš„å¯æ‰“å°ç‰ˆæœ¬ [p]" accesskey="p">å¯æ‰“å°ç‰ˆ</a></li>				<li id="t-permalink"><a href="index.php-title=ç‰¹æ®Š-é“¾å‡ºæ›´æ”¹&hidemyself=0&from=20111128013603&hideliu=1&target=æ–‡ä»¶-Introff_1jLOYlJZaqiA.jpg.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=%E5%9F%BA%E4%BA%8EDiscuz!X%E7%9A%84%E5%BF%83%E6%83%85%E5%A2%99&oldid=224" title="è¿™ä¸ªé¡µé¢ä¿®è®¢ç‰ˆæœ¬çš„æ°¸ä¹…é“¾æ¥">æ°¸ä¹…é“¾æ¥</a></li>			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer">
	<div id="f-poweredbyico"><a href="javascript:if(confirm('http://www.mediawiki.org/  \n\nÎÄ¼ş²¢Î´ÒÀ Teleport Pro È¡»Ø£¬ÒòÎª ËüµÄÓò»òÂ·¾¶³¬¹ı¿ªÊ¼ÍøÖ·ÖĞÉèÖÃµÄ·¶Î§¡£  \n\nÄãÒª´Ó·şÎñÆ÷ÉÏ´ò¿ªËüÂğ£¿'))window.location='http://www.mediawiki.org/'" tppabs="http://www.mediawiki.org/"><img src="skins/common/images/poweredby_mediawiki_88x31.png" tppabs="http://dev.discuz.org/wiki/skins/common/images/poweredby_mediawiki_88x31.png" height="31" width="88" alt="Powered by MediaWiki" /></a></div>
	<ul id="f-list">
		<li id="lastmod"> æ­¤é¡µé¢æœ€åä¿®è®¢äº2011å¹´4æœˆ14æ—¥ (æ˜ŸæœŸå››) 08:56ã€‚</li>
		<li id="privacy"><a href="err:bad_redirect" tppabs="http://dev.discuz.org/wiki/index.php?title=Discuz!_%E6%8A%80%E6%9C%AF%E6%96%87%E5%BA%93:%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96" title="Discuz! æŠ€æœ¯æ–‡åº“:éšç§æ”¿ç­–">éšç§æ”¿ç­–</a></li>
		<li id="about"><a href="index.php-title=Discuz!_æŠ€æœ¯æ–‡åº“-å…³äº.htm" tppabs="http://dev.discuz.org/wiki/index.php?title=Discuz!_%E6%8A%80%E6%9C%AF%E6%96%87%E5%BA%93:%E5%85%B3%E4%BA%8E" title="Discuz! æŠ€æœ¯æ–‡åº“:å…³äº">å…³äºDiscuz! æŠ€æœ¯æ–‡åº“</a></li>
		<li id="disclaimer"><a href="err:bad_redirect" tppabs="http://dev.discuz.org/wiki/index.php?title=Discuz!_%E6%8A%80%E6%9C%AF%E6%96%87%E5%BA%93:%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E" title="Discuz! æŠ€æœ¯æ–‡åº“:å…è´£å£°æ˜">å…è´£å£°æ˜</a></li>
	</ul>
</div>
</div>

<script>if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.119 secs. --></body><!-- Cached 20110425114758 -->
</html>
